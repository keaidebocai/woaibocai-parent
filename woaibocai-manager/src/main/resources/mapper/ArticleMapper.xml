<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="top.woaibocai.manager.mapper.ArticleMapper">
    <update id="updateArticleStatus">
        update
            blog_article
        set
            title=#{title},is_top=#{isTop},is_commont=#{isCommont},status=#{status}
        where
            id=#{id}
    </update>
    <delete id="deletedArticleById">
        delete from blog_article where id=#{id}
    </delete>
    <!--IPage<ArticlePageVo> findPage(@Param("page") IPage<ArticlePageVo> page);-->
    <select id="findPage" resultType="top.woaibocai.model.vo.manager.ArticlePageVo">
        select
            id,title,is_top,view_count,is_commont,status,is_deleted,create_time,update_time
        from
            blog_article
        <where>
            <if test="queryArticleCriteria.title != null and queryArticleCriteria.title != ''">
                and title like concat('%',#{queryArticleCriteria.title},'%')
            </if>
            <if test="queryArticleCriteria.isTop != null and queryArticleCriteria.isTop != ''">
                and is_top=#{queryArticleCriteria.isTop}
            </if>
            <if test="queryArticleCriteria.isCommont != null and queryArticleCriteria.isCommont != ''">
                and is_commont=#{queryArticleCriteria.isCommont}
            </if>
            <if test="queryArticleCriteria.status != null and queryArticleCriteria.status != ''">
                and status=#{queryArticleCriteria.status}
            </if>
        </where>
        <choose>
            <when test="queryArticleCriteria.orderBy = '0'">
                order by view_count
            </when>
            <otherwise>
                order by create_time
            </otherwise>
        </choose>


    </select>
</mapper>